{% set version = "2021.5" %}

package:
  name: gromacs
  version: {{ version }}

build:
# switch to number 100 for mpi version
  number: 0

source:
  url: http://ftp.gromacs.org/pub/gromacs/gromacs-{{ version }}.tar.gz

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - binutils
    - cmake
    - llvm-openmp  # [osx]
    - python
  host:
    - openmpi
    - fftw
    - libhwloc 1.*
    - libblas
    - liblapack
    - llvm-openmp  # [osx]
    - plumed
  run:
    - openmpi
    - fftw
    - libhwloc 1.*
    - llvm-openmp  # [osx]
    - plumed >=2

test:
  commands:
    - gmx_mpi -version
    - gmx_mpi mdrun -h | grep plumed

about:
  home: http://www.gromacs.org/
  license: GNU Lesser General Public License (LGPL)
  summary: GROMACS is a versatile package to perform molecular dynamics.

